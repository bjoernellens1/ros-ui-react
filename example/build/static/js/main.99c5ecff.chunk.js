(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{24:function(e,t,n){},45:function(e,t,n){},55:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var o=n(21),s=n.n(o),a=n(47),r=n.n(a),c=(n(55),n(49)),l=n(3),i=(n(24),n(0)),m=n.n(i),u=n(2),d=n(14),p=n.n(d),h=(n(83),n(48)),b=n(19),f=n.n(b);function g(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,j(e,t)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}var x=function(e){function t(t){return e.call(this,t)||this}return g(t,e),t.prototype.render=function(){return m.a.createElement(u.f,{color:"dark",value:50*(this.props.value+1),showvalue:"true",className:"mb-1"})},t}(i.Component),v=function(e){function t(t){var n;return(n=e.call(this,t)||this).move=function(e){n.props.move(e.x/n.props.size,e.y/n.props.size)},n.stop=function(){n.props.stop()},n}return g(t,e),t.prototype.render=function(){return m.a.createElement(h.Joystick,{size:2*this.props.size,baseColor:"CornflowerBlue",stickColor:"blue",move:this.move,stop:this.stop})},t}(i.Component),E=function(e){function t(t){var n;return(n=e.call(this,t)||this).timerEnd=function(){var e=new p.a.Message({header:{stamp:[0,0],frame_id:""},axes:[],buttons:[]});e.axes=n.state.axes,e.buttons=n.state.buttons,n.topic.publish(e)},n.buttonOn=function(e){var t=n.state.buttons;t[e]=1,n.setState({buttons:t})},n.buttonOff=function(e){var t=n.state.buttons;t[e]=0,n.setState({buttons:t})},n.joyStop=function(e){var t=n.state.axes;t[2*e]=0,t[2*e+1]=0,n.setState({axes:t})},n.joyMove=function(e,t,o){var s=n.state.axes;s[2*o]=e,s[2*o+1]=t,n.setState({axes:s})},n.controllers={},n.state={buttons:[0,0,0,0],axes:[0,0,0,0],sticks:[0,0]},n.ros=new p.a.Ros,n}g(t,e);var n=t.prototype;return n.componentDidMount=function(){this.ros.on("error",(function(e){console.log(e)})),this.ros.on("connection",(function(){console.log("Connection made!")})),this.ros.on("close",(function(){console.log("Connection closed.")})),this.ros.connect(this.props.rosbridgeAddress),this.topic=new p.a.Topic({ros:this.ros,name:"/joy",messageType:"sensor_msgs/Joy"}),setInterval(this.timerEnd,20)},n.componentWillUnmount=function(){this.ros.close()},n.render=function(){var e=this,t=this.state.buttons.map((function(t,n){return m.a.createElement(u.e,{key:n,col:"6",sm:"4",md:"2",xl:!0,className:"mb-3 mb-xl-0 d-grid gap-2"},m.a.createElement(u.a,{block:"true",color:t>0?"primary":"secondary",onPointerDown:function(){return e.buttonOn(n)},onPointerUp:function(){return e.buttonOff(n)}},n))})),n=this.state.sticks.map((function(t,n){return m.a.createElement(u.e,{key:n,col:"6",sm:"4",md:"2",xl:!0,className:"mb-3 mb-xl-0"},m.a.createElement(v,{size:40,move:function(t,o){return e.joyMove(t,o,n)},stop:function(){return e.joyStop(n)}}))})),o=this.state.axes.map((function(e,t){return m.a.createElement(u.e,{key:t,col:"6",sm:"4",md:"2",xl:!0,className:"mb-3 mb-xl-0"},m.a.createElement(x,{value:e}))}));return m.a.createElement(u.b,null,m.a.createElement(u.d,null,m.a.createElement("strong",null,"Simulated Controller")),m.a.createElement(u.c,null,m.a.createElement(u.g,{className:"align-items-center"},t),m.a.createElement(u.g,{className:"align-items-center mt-3"},o),m.a.createElement(u.g,{className:"align-items-center mt-3"},n)))},t}(i.Component);var y=function(e){function t(t){var n;return(n=e.call(this,t)||this).gamepadScanIntervalId=0,n.rosSendIntervalId=0,n.connecthandler=function(e){n.addgamepad(e.gamepad)},n.addgamepad=function(e){n.controllers[e.gamepad.index]=e,console.log("Gamepad Connected")},n.disconnecthandler=function(e){n.removegamepad(e.gamepad)},n.removegamepad=function(e){console.log("Gamepad Disconnected"),delete n.controllers[e.gamepad.index]},n.updateStatus=function(){for(var e=0,t=Object.entries(n.controllers);e<t.length;e++);},n.timerEnd=function(){n.updateStatus();var e,t,o={header:{stamp:[0,0],frame_id:""},axes:[],buttons:[]};if(n.controllers[0]){for(var s=n.controllers[0].gamepad,a=0;a<s.axes.length;a++)o.axes.push((e=s.axes[a],t=n.props.deadzone,e>t?e-=t:e<-t?e+=t:e=0,-e/(1-t)));for(a=0;a<s.buttons.length;a++)o.buttons.push(s.buttons[a].pressed?1:0);n.topic.publish(o);var r=s.buttons.map((function(e){return e.pressed})),c=s.axes;n.setState((function(e){return{t:e.t+1,buttons:r,axes:c}}))}},n.controllers={},n.state={buttons:[],axes:[],t:0},n.ros=new p.a.Ros,n}g(t,e);var n=t.prototype;return n.componentDidMount=function(){this.ros.on("error",(function(e){console.log(e)})),this.ros.on("connection",(function(){console.log("Connection made!")})),this.ros.on("close",(function(){console.log("Connection closed.")})),this.ros.connect(this.props.rosbridgeAddress),this.topic=new p.a.Topic({ros:this.ros,name:"/joy",messageType:"sensor_msgs/Joy"}),f.a.start(),f.a.addEventListener("connect",this.connecthandler),f.a.addEventListener("disconnect",this.disconnecthandler),this.rosSendIntervalId=setInterval(this.timerEnd,20)},n.componentWillUnmount=function(){this.ros.close(),f.a.stop(),clearInterval(this.rosSendIntervalId)},n.render=function(){var e=this.state.buttons.map((function(e,t){return m.a.createElement(u.e,{key:t,col:"6",sm:"4",md:"2",xl:!0,className:"mb-3 mb-xl-0  d-grid gap-2"},m.a.createElement(u.a,{block:"true",color:e>0?"primary":"secondary"},t))})),t=this.state.axes.map((function(e,t){return m.a.createElement(u.e,{key:t,col:"6",sm:"4",md:"2",xl:!0,className:"mb-3 mb-xl-0"},m.a.createElement(x,{value:e}))}));return m.a.createElement(u.b,null,m.a.createElement(u.d,null,m.a.createElement("strong",null,"Real Controller")),m.a.createElement(u.c,null,m.a.createElement(u.g,{className:"align-items-center"},e),m.a.createElement(u.g,{className:"align-items-center mt-3"},t)))},t}(i.Component);y.defaultProps={deadzone:.25};var O=function(e){function t(t){return e.call(this,t)||this}return g(t,e),t.prototype.render=function(){return m.a.createElement(u.b,{style:{width:"100%",height:"100%"}},m.a.createElement(u.d,null,m.a.createElement("strong",null,"Image Stream")),m.a.createElement(u.c,null,m.a.createElement("img",{src:this.props.src,style:{width:"100%",height:"100%",objectFit:"contain"}})))},t}(i.Component),S=(n(45),n(1));var C=function(){return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(O,{src:"http://localhost:8080/stream?topic=/camera/image_raw"}),Object(S.jsx)(y,{rosbridgeAddress:"ws://localhost:9090"})]})};var w=function(){return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(O,{src:"http://localhost:8080/stream?topic=/camera/image_raw"}),Object(S.jsx)(E,{rosbridgeAddress:"ws://localhost:9090"})]})};function k(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Home"}),Object(S.jsx)("nav",{children:Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:Object(S.jsx)("a",{href:"/",children:"Home"})}),Object(S.jsx)("li",{children:Object(S.jsx)("a",{href:"/simgamepaddemo",children:"Sim Gamepad Demo"})}),Object(S.jsx)("li",{children:Object(S.jsx)("a",{href:"/realgamepaddemo",children:"Real Gamepad Demo"})})]})})]})}var I=function(){return Object(S.jsx)(c.a,{children:Object(S.jsxs)(l.c,{children:[Object(S.jsx)(l.a,{exact:!0,path:"/simgamepaddemo",name:"Sim Gamepad Demo",children:Object(S.jsx)(w,{})}),Object(S.jsx)(l.a,{exact:!0,path:"/realgamepaddemo",name:"Real Gamepad Demo",children:Object(S.jsx)(C,{})}),Object(S.jsx)(l.a,{path:"/",name:"Home",children:Object(S.jsx)(k,{})})]})})};var N=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,93)).then((t=>{let{getCLS:n,getFID:o,getFCP:s,getLCP:a,getTTFB:r}=t;n(e),o(e),s(e),a(e),r(e)}))};r.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(I,{})}),document.getElementById("root")),N()}},[[92,1,2]]]);
//# sourceMappingURL=main.99c5ecff.chunk.js.map